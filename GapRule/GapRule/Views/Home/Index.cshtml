@model GapRule.Models.JsonTemplateResultViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1>Gap Rule Solution</h1>           
        </div>
    </div>
    <div class="panel-group">
        <div class="panel panel-default">
            @foreach (var result in @Model.Results)
            {
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" href=@("#collapse" + @result.Id)>@result.TestCaseName <i class="glyphicon-plus"></i></a>                        
                    </h4>
                </div>
                <div id=@("collapse"+ @result.Id) class="panel-collapse collapse">
                    <div class="panel-body">
                        <div class="row">
                            <p>Input Reservation Date Range: @result.ExecutionTemplate.Search.StartDate.ToShortDateString() - @result.ExecutionTemplate.Search.EndDate.ToShortDateString()</p>
                        </div>
                        <div class="row">
                            <p>Input Campsites and Reservations:</p>
                        </div>
                        @foreach (var site in @result.ExecutionTemplate.Campsites)
                        {
                            <div class="padded-row">
                                @site.Name
                                @foreach (var res in @site.CampsiteReservationList)
                                {
                                    <div class="padded-row">
                                        @res.StartDate.ToShortDateString() - @res.EndDate.ToShortDateString()
                                    </div>
                                }
                            </div>
                        }
                        <div class="row">
                            <p>Gap Rules:</p>
                            @foreach (var rule in @result.ExecutionTemplate.GapRules)
                            {
                                <div class="padded-row">
                                    @rule.GapSize
                                </div>
                            }
                        </div>
                        <div class="row">
                            <p style="font-weight:bold">Available Campsites:</p>
                            @foreach (var site in @result.ResultingCampsites)
                            {
                                <div class="padded-row">
                                    @site.Name
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</body>
</html>
